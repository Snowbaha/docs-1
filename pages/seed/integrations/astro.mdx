# Astro

![Snappy loves Astro](/seed/integrations/astro/Astro_Docs_image.svg)

This example show how to set up your Astro Seed workflow with Snaplet.

## Prerequisites

- Set up a new Astro project by following the [Astro Quickstart](https://docs.astro.build/en/install/auto/) guide.
- Astro DB added to your project by following the [Astro DB Quickstart](https://docs.astro.build/en/guides/astro-db/).

> The first time you run the `astro dev` command, a local SQLite database is created at `.astro/content-db`, we will use this database for seeding.

## 1. Setup & Install Seed

**1.1** To interface with your sqlite database we'll need to install an adapter for @snaplet/seed

```bash
npm install -D better-sqlite3
```

**1.2.** Initialize @snaplet/seed in your your root project.

```bash
npx @snaplet/seed init
```

**1.3.** The init command will create a `seed.config.ts` file in which you can specify the database connection details, you will be prompted
to paste in the path to your sqlite database.

```ts seed.config.ts
import { SeedBetterSqlite3 } from "@snaplet/seed/adapter-better-sqlite3";
import { defineConfig } from "@snaplet/seed/config";
import Database from "better-sqlite3";

export default defineConfig({
  adapter: () => {
    const client = new Database(".astro/content.db", { fileMustExist: true });
    return new SeedBetterSqlite3(client);
  },
});
```

## 2. Hook into the Astro seeding workflow

At the moment Astro cannot bundle seed's generated assets, so we will use the `seed.ts` file to define our seeding logic and `db/seed.ts` to run the seeding process using `execa`.

```ts db/seed.ts
import { $ } from "execa";

export default async function seed() {
  console.log("ðŸŒ± seeding database using snaplet...");
  await $`npx tsx seed.ts`;
}
```

> When you initially start your development (using `astro dev`), before running the seed script, Astro will clear the database. For this
> reason, you do not have to use the [`$resetDatabase`](https://docs.snaplet.dev/seed/reference/client#resetdatabase) method in your `seed.ts` file.

## 3. Going further

For a full example of project using `@snaplet/seed` with Astro:

- Seeding a database with image columns

check out the [example project](https://github.com/snaplet/examples/tree/main/seed/astro-twitter-clone)